<!DOCTYPE html>
<html lang="en">
<head>
  <!-- fira sans -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <!-- fira code -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap" rel="stylesheet">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://abzrg.github.io/rss.xml">
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://rsms.me/">
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
  <link rel="stylesheet" href="https://abzrg.github.io/style.css">
  <link rel="shortcut icon" type="image/png" href="https://abzrg.github.io/favicon.png"/>
  
    <title>Compiler Attributes: nonnull | Ali&#x27;s Blog</title>
  
  

</head>
<body>
  <div class="wrapper">
  <section class="section">
    <div class="container">
      
<div class="about">
  <a id="about_back" href="/">ABOUT</a>
</div>
<h1 class="title">
  Compiler Attributes: nonnull
</h1>

<p class="date">Apr 16, 2025</p>

<p>You can use <a href="https://gcc.gnu.org/onlinedocs/gcc-4.4.7/gcc/Function-Attributes.html"><code>nonnull</code> attribute</a> to write safer, clearer, and faster code.</p>
<p>GCC and Clang support the <code>__attribute__((nonnull))</code> (or <code>[[gnu::nonnull]]</code> in C++) to mark function pointer arguments as never <code>NULL</code>. This helps:</p>
<ol>
<li>Catch <code>NULL</code> arguments at compile time.</li>
<li>Enable better compiler optimizations.</li>
<li>Document intent clearly.</li>
</ol>
<ul>
<li><code>__attribute__((nonnull))</code>: All pointer args must be non-<code>NULL</code>.</li>
<li><code>__attribute__((nonnull(1, 3)))</code>: Only specific arguments (1-based indexing).</li>
</ul>
<p>For example:</p>
<pre data-lang="c" class="language-c "><code class="language-c" data-lang="c">void f(int *p) __attribute__((nonnull(1)));
f(NULL); &#x2F;&#x2F; May trigger warning with -Wall
</code></pre>
<p>In C++:</p>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">[[gnu::nonnull(2)]] void g(int a, int *b);
</code></pre>
<p>Note that</p>
<ul>
<li>Add <code>-Wall</code> to enable warnings.</li>
<li>Apply <code>nonnull</code> in declarations, not definitions.</li>
<li>Only catches statically known <code>NULL</code>sâ€”runtime checks are still needed.</li>
</ul>


    </div>
  </section>
  <footer>
    <p id="copyright">Copyright &copy; 2025<a href="/" id="home">Ali Bozorgzadeh</a></p>
  </footer>
  </div>
</body>
</html>
